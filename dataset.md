Данные доступны по [ссылке](https://drive.google.com/file/d/1Lqs-wbWKWuZ-u7kdIZSOIx1qh2jUire-/view?usp=sharing)

Данный датасет собрали с помощью функции [getflats()](https://github.com/lenarsaitov/cianparser/tree/main?tab=readme-ov-file#метод-get_flats) в парсере CianParser(), Сергей добавил в функцию парсинг на основе метров и в результате мы собрали 89 тысяч записей батчами в диапазонах от ±15 м^2 и до максимально доступных значений площади от студий и до максимального доступного количества комнат. 


Изначально планировалось использовать только CianParser для всех, верхнеуровневых и детальных, запросов, но 
* У нас возникала 403 ошибка при попытке получения детальных признаков по квартире (with_extra_data=True): похоже Циан идентифицировал эти запросы как автоматизированные
* Также возникала ошибка No connection to proxy - публично доступные прокси серверы, используемые в парсере, всегда были недоступны

Поэтому мы решили сделать детальный парсер самим, однако возникло несколько трудностей
* Пул прокси серверов - мы использовали решение [web unlocker от BrightData](https://brightdata.com/products/web-unlocker),смогли собрать 635 строк с дополнительными атрибутами (подробнее о них ниже), но бесплатная версия не позволяет собрать больше данных. Подключение к прокси реализовано в функции [proxy_request](https://github.com/AI-Masters-Team-18/team18_yp_realestate_price_forecast_v1/blob/cian_detail_page_parse_feature/parse_detailed_cian_page.py)
* Selenium - также, как альтернатива подключению к пулу прокси серверов, реализовал в функции [selenium_request](https://github.com/AI-Masters-Team-18/team18_yp_realestate_price_forecast_v1/blob/cian_detail_page_parse_feature/parse_detailed_cian_page.py) подключение к детальным страницам циана через Selenium решение - при проходе по 4 рандомным ссылкам работает с переменным успехом - отсутсвует идемпотентность парсинга. Пока не разобрались, в чем причины такого поведения, но это решение хоть и медленнее, должно обеспечить сбор дополнительных данных. На данный момент детальные данные не собраны для всех url страниц.

Признаки:
* author (88131 non-null значений, тип object) — имя автора, создавшего объявление

* author_type (88216 non-null значений, тип object) — тип автора, создавшего объявление (например, Застройщик, агент, риэлтор и др.).

* url (88947 non-null значений, тип object) — URL-адрес страницы с объявлением.

* location (88947 non-null значений, тип object) — город (в данном случае во всех записях Москва)

* deal_type (88947 non-null значений, тип object) — тип сделки (в данном случае во всех записях sale).

* accommodation_type (88947 non-null значений, тип object) — тип жилья (в данном случае во всех записях flat).

* floor (88947 non-null значений, тип int64) — этаж, на котором находится объект.

* floors_count (88947 non-null значений, тип int64) — общее количество этажей в здании.

* rooms_count (88947 non-null значений, тип int64) — количество комнат в объекте.
  * Убрали строки, в которых продается только доля квартиры (идентифицировалось парсером как rooms_count=-1).
  * В студиях на данный момент предполагаем, что нет квартир, которые продаются долями.

* total_meters (88947 non-null значений, тип float64) — общая площадь объекта в квадратных метрах.

* price (88061 non-null значений, тип float64) — цена объекта.

* district (77156 non-null значений, тип object) — район, в котором находится объект.

* street (77832 non-null значений, тип object) — улица, на которой расположен объект.

* house_number (82167 non-null значений, тип object) — номер дома.

* underground (87282 non-null значений, тип object) — ближайшая станция метро.

* residential_complex (47102 non-null значений, тип object) — название жилого комплекса (если имеется).

Следующие атрибуты в исходном датасете принимают null/nan значения:

* price (886) - возможные варианты обработки
  * 1) уберем, так как обучение без целевой переменной невозможно
  * либо 2) дополним при проходе по датасету детальным парсером
* district (11791) & street (11115) - возможные варианты обработки
  1) используем [Яндекс Геокодер](https://yandex.ru/dev/geocode/doc/ru/) для заполнения недостающих значений на основе наименования ЖК
  2) используем детальный самописный парсер, возьмем значения из детальных страниц циана
* house_number (6780) - заполнить дефолтным значением 0, тк мало влияет на целевую переменную
* underground (1665) - заполним значениями из детального парсинга c помощью selenuim, либо заполним дефолтным значением far
* residential_complex (41845)
 * убираем весь столбец, тк название ЖК не влияет на цену
 * либо заполняем дефолтным значением Not Available, так как в некоторых ЖК всегда выше средних

Атрибуты из детального парсера:
* mins_to_underground (float64) - количество минут пешком до метро
 * из html контента страницы нельзя однозначно определить, пешком это или на машине, на данный момент все собранные значения будут определяться как пешком
* housing_type (object) - тип жилья (например Новостройка, Вторичка / Апартаменты, Вторичка и так далее)
* ceiling_height_m (float64) - высота потолков
* bathroom_type (object) - тип санузла ('1 совмещенный', '1 раздельный' и т.д.)
* view (object) - вид из окон ('Во двор' 'На улицу' 'На улицу и двор')
* renovation_type (object) - тип ремонта ('Без отделки', 'Косметический', 'Евроремонт' и т.д.)
* house_material_type (object) - тип дома ('Монолитно-кирпичный' 'Монолитный', 'Кирпичный', 'Панельный' и т.д.)
* parking (object) - тип парковки
* living_area (float64) - размер жилой площади 
* kitchen_area (float64) - размер кухонной площади
* construction_year (float64) - год постройки
* house_commisioned (object) -  информация о сдаче дома (сдан/ не сдан)
* price_per_meter (float64) - цена за квадратный метр
* deal_conditions (object) - тип условий заключения сделки при покупке недвижимости ('долевое участие (214-ФЗ)', 'свободная продажа', 'переуступка')
* mortgage_availability (object) - доступность ипотеки
* transport_accessibility_score (float64) - оценка транспортной доступности от ЦИАН (при наличии)
