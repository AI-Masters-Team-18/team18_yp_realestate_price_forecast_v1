# Описание признаков и их типов
Размер нашего датасета 112635х56

Признаки:
- **ссылка (object)**  
  Ссылка на страницу объявления.

- **до центра (object)**  
  Расстояние до центра города, указано в километрах.

- **комнат (object)**  
  Количество комнат в квартире.

- **Площадь квартиры (object)**  
  Общая площадь квартиры, указана в квадратных метрах.

- **Жилая площадь (object)**  
  Жилая площадь квартиры, указана в квадратных метрах.

- **Этаж (float64)**  
  Этаж, на котором расположена квартира.

- **Санузел (object)**  
  Тип санузла (например, раздельный или совмещённый).

- **Кол-во санузлов (float64)**  
  Количество санузлов в квартире.

- **Ремонт (object)**  
  Состояние ремонта в квартире (например, без ремонта, евро).

- **Вид из окна (object)**  
  Вид из окна (например, во двор или на улицу).

- **Год постройки (float64)**  
  Год постройки здания.

- **Высота потолков (object)**  
  Высота потолков в квартире, указана в метрах.

- **Лифт (object)**  
  Информация о наличии лифта.

- **Материал стен (object)**  
  Материал, из которого построено здание (например, монолит).

- **Парковка (object)**  
  Информация о наличии парковки.

- **описание (object)**  
  Текстовое описание квартиры в объявлении.

- **цена (object)**  
  Стоимость объекта недвижимости.

- **адрес (object)**  
  Адрес объекта недвижимости.

- **станция1 (object)**  
  Название ближайшей станции метро.

- **время_до_станции1 (float64)**  
  Время до ближайшей станции метро (в минутах).

- **пешком1 (float64)**  
  Информация о том, возможно ли добраться пешком до станции метро (1 — да, 0 — нет).

- **станция2 (object)**  
  Название второй ближайшей станции метро.

- **время_до_станции2 (float64)**  
  Время до второй станции метро (в минутах).

- **пешком2 (float64)**  
  Возможность пешей доступности до второй станции метро.

- **станция3 (object)**  
  Название третьей ближайшей станции метро.

- **время_до_станции3 (float64)**  
  Время до третьей станции метро (в минутах).

- **пешком3 (float64)**  
  Возможность пешей доступности до третьей станции метро.

- **Этажей в доме (float64)**  
  Общее количество этажей в здании.

- **Отделка (object)**  
  Тип отделки (например, черновая, чистовая).

- **Срок сдачи (object)**  
  Срок сдачи объекта (для новостроек).

- **Временная эпоха (object)**  
  Архитектурная эпоха здания.

- **Отопление (object)**  
  Тип отопления в здании.

- **Тип жилья (object)**  
  Тип объекта недвижимости (например, апартаменты).

- **Балкон/лоджия (object)**  
  Наличие балкона или лоджии.

- **Серия дома (object)**  
  Серия дома.

- **Кондиционер (object)**  
  Информация о наличии кондиционера.

- **Мебель (object)**  
  Информация о наличии мебели.

- **Кухонная мебель (object)**  
  Информация о наличии кухонной мебели.

- **Реновация (object)**  
  Участие дома в программе реновации.

- **Территория (object)**  
  Описание придомовой территории.

- **Вид из окон (object)**  
  Описание вида из окон.

- **Холодильник (object)**  
  Наличие холодильника.

- **Стиральная машина (object)**  
  Наличие стиральной машины.

- **Хорошая школа (object)**  
  Информация о наличии хорошей школы поблизости.

- **Консьерж (object)**  
  Информация о наличии консьержа.

- **Парк или зона отдыха (object)**  
  Наличие парка или зоны отдыха поблизости.

- **Фитнес клуб (object)**  
  Информация о наличии фитнес-клуба поблизости.

- **Детский сад (object)**  
  Наличие детского сада поблизости.

- **Посудомойка (object)**  
  Наличие посудомоечной машины.

- **Интернет (object)**  
  Наличие интернета.

- **Телевизор (object)**  
  Наличие телевизора.

- **Торговый центр (object)**  
  Наличие торгового центра поблизости.

- **Хорошие школы (object)**  
  Наличие нескольких хороших школ поблизости.

- **Source_File (object)**  
  Источник данных.

- **Sheet_Name (object)**  
  Название листа в файле Excel.

- **Площадь кухни (object)**  
  Площадь кухни в квартире.

# Информация о пропущенных значениях
Уберем из датасета неинформативные признаки и пустые столбцы (+90% значений отсутствует) методом `drop`:
- **ссылка**  
- **Санузел**  
- **Кол-во санузлов**  
- **описание**  
- **Временная эпоха**  
- **Отопление**  
- **Балкон/лоджия**  
- **Серия дома**  
- **Кондиционер**  
- **Кухонная мебель**  
- **Холодильник**  
- **Хорошая школа**  
- **Фитнес клуб**  
- **Детский сад**  
- **Посудомойка**  
- **Интернет**  
- **Телевизор**  
- **Торговый центр**  
- **Хорошие школы**  
- **Стиральная машина**  
- **Source_File**  
- **Sheet_Name**  
- **адрес**  
- **Лифт**  
- **Парковка**  
- **Парк или зона отдыха**  
- **Консьерж**  
- **Вид из окон**
- **Вид из окна**  
- **Территория**  
- **Реновация**  
- **Мебель**

# Поиск и удаление дубликатов
Проверим, имеются ли в датасете полные дубли. Если они обнаружатся, удалим их с помощью метода `drop_duplicates()`. В нашем датасете было найдено 24536 дублей, которые мы удалили.
# Поиск пропущенных значений и способы обработки
Посчитаем сумму пропущенных значений в датасете методом `isna().sum()`
##  Пункт №1
Преобразуем значения столбцов `['до центра', 'Площадь квартиры', 'Жилая площадь', 'Высота потолков', 'цена', 'Площадь кухни']` в числовой формат (`float64`), заменим запятые на точки, некорректные значения преобразуем в `NaN`, а затем заполним их медианой соответствующего столбца
##  Пункт №2
Преобразуем значения столбцов `['Этаж', 'Этажей в доме']` в целочисленный формат (`int`), некорректные значения заменим на `NaN`, а затем заполним их медианой соответствующего столбца.
##  Пункт №3
Мы заметили, что значения в столбце `Срок сдачи` представляют собой строки, содержащие информацию о квартале и годе, например, `'4\xa0кв.\xa02025\xa0г.'`, или только год, например, `'2025\xa0г.'`. Также встречаются значения `nan` и `'Неизвестно'`. Однако для анализа нас интересует только год. Поэтому мы извлекли год из строк, заменили `'Неизвестно'` на `NaN`, а некорректные значения преобразовали в 0, после чего перевели данные в целочисленный формат.
##  Пункт №4
Преобразуем значения столбца `Год постройки` в целочисленный формат (`int`), некорректные значения заменим на `0`, чтобы обеспечить консистентность данных для дальнейшего анализа.
##  Пункт №5
Объединим столбцы `Год постройки` и `Срок сдачи` в один столбец `Год постройки`, подставляя значения из `Срок сдачи`, если данные в `Год постройки` отсутствуют. Это упростит структуру данных и устранит дублирование.

Перед этим подсчитаем количество строк, где:
- Указаны оба значения (`Год постройки` и `Срок сдачи`). Таких значений нет
- Не указано ни одно значение. 33505 значений
- Указан только `Год постройки`. 16975 значений
- Указан только `Срок сдачи`. 37619 значений

Таким образом, конфликты при объединении исключены, так как отсутствуют строки, где указаны оба столбца. При объединении сохраняются исходные значения из столбца `Год постройки`, если они больше 0. Если данные в `Год постройки` отсутствуют, подставляются значения из столбца `Срок сдачи`. После объединения столбец `Срок сдачи` удаляется как избыточный.
##  Пункт №6
Посмотрим на столбец `Тип жилья`. В нём содержатся значения: `[nan, 'апартаменты']`. Если тип жилья не указан (`NaN`), будем считать его квартирой. Заменим `NaN` на `квартира`.
##  Пункт №7
Посчитаем количество строк, где хотя бы один из столбцов: `станция1`, `станция2` или `станция3` имеет значение `NaN`. Удалим эти 355 строки, поскольку отсутствие данных о станциях может указывать на то, что квартиры находятся за пределами города.

Преобразуем значения столбцов `время_до_станции1`, `пешком1`, `время_до_станции2`, `пешком2`, `время_до_станции3`, `пешком3` в целочисленный формат (`int`).

Оставим только ближайшую станцию метро. Определим минимальное время из столбцов `время_до_станции1`, `время_до_станции2`, `время_до_станции3`. Сохраним её название, время и признак "пешком". Удалим данные о других станциях.
##  Пункт №8
Для категориальных данных в столбце `Материал стен` заполним пропуски наиболее часто встречающимся значением (модой).
##  Пункт №9
1. **Проверим уникальные значения в столбцах**
2. **Приведём значения в столбце `Отделка` к единому формату**
3. **Посчитаем количество строк, где оба столбца заполнены**
4. **Заполним пропуски в столбце `Ремонт` значениями из столбца `Отделка`, если они отсутствуют**
5. **Удалим столбец `Отделка`**
6. Для категориальных данных в столбце `Ремонт` заполним пропуски наиболее часто встречающимся значением (модой).

### Вывод

Таким образом, в нашем датасете больше не осталось пропущенных значений. Однако стоит обратить внимание на столбец `Год постройки`, где значения `NaN` были заменены на `0`. В результате, около 38% квартир не имеют указания года постройки. Для дальнейшего анализа и обучения модели стоит рассмотреть возможность удаления таких данных или заполнения их медианным значением.
# Валидация значений
Выполним валидацию значений в числовых столбцах DataFrame, подсчитывая количество отрицательных значений в каждом из них. Удалим строки, содержащие отрицательные значения в числовых столбцах.
# Изучение поведения каждого признака
После всех преобразований над значениями переименуем колонки

С помощью функции `plot_feature_distributions(data, features)` построим визуализацию распределений и boxplot числовых признаков

Дополнительно с помощью функции `plot_feature_price_relationships(data, features, target)` построим для визуализации взаимосвязи числовых признаков с целевой переменной

Оценим попарные распределения признаков, Boxplot и выбросы

В нашем датасете было найдено 10189 выбросов, которые мы удалили.

# Корреляционный анализ
Посчитаем корреляцию Пирсона и построим тепловую карту 

### Сильная связь (корреляция больше 0.7 или меньше -0.7):
1. **Общая площадь и Жилая площадь (0.78):** Большая общая площадь почти всегда означает большую жилую площадь.
2. **Время и Пешком (-0.75):** Чем больше время до метро, тем меньше вероятность, что до него можно дойти пешком.
3. **Общая площадь и Цена (0.72):** Квартиры с большей общей площадью стоят дороже.

---

### Умеренная связь (корреляция от 0.3 до 0.7 или от -0.3 до -0.7):
1. **Цена и Пешком (0.28):** Возможность дойти до метро пешком немного увеличивает цену.
2. **Жилая площадь и Цена (0.54):** Большая жилая площадь заметно увеличивает цену.
3. **Этаж и Кол-во этажей в доме (0.68):** Чем выше этаж квартиры, тем больше вероятность, что дом многоэтажный.
4. **Цена и Расстояние до центра (-0.45):** Квартиры ближе к центру стоят дороже.
5. **Площадь кухни и Цена (0.32):** Большая кухня немного увеличивает стоимость квартиры.
6. **Год постройки и Этаж (0.37):** В новых домах квартиры чаще находятся на высоких этажах.

---

### Слабая связь (корреляция от 0.1 до 0.3 или от -0.1 до -0.3):
1. **Год постройки и Цена (0.08):** Новые дома стоят чуть дороже, но связь слабая.
2. **Расстояние до центра и Год постройки (0.17):** Новые дома чаще находятся подальше от центра.
3. **Жилая площадь и Расстояние до центра (-0.12):** Удалённость от центра немного уменьшает жилую площадь.
4. **Этаж и Цена (0.16):** Высокий этаж немного повышает цену.

---

### Практически отсутствует связь (корреляция меньше 0.1 по модулю):
1. **Общая площадь и Этаж (0.02):** Этаж квартиры практически не связан с её общей площадью.
2. **Год постройки и Высота потолков (-0.02):** Высота потолков никак не зависит от года постройки.
3. **Расстояние до центра и Этаж (-0.02):** Удалённость от центра не влияет на этажность квартиры.

### Общие выводы:

1. **Высокая корреляция между "Общая площадь" и "Жилая площадь" (0.78):** Это может указывать на мультиколлинеарность. Рекомендуется оставить только один из признаков. Например, можно удалить "Жилая площадь", так как "Общая площадь" является более общим показателем.

2. **Умеренная корреляция между "Этаж" и "Кол-во этажей в доме" (0.68):** Это указывает на возможную избыточность данных. Для упрощения модели можно оставить "Этаж", так как он более информативен для анализа конкретной квартиры.

3. **Сильная отрицательная корреляция между "Время" и "Пешком" (-0.75):** Эти признаки сильно связаны, но несут разную информацию. Удаление одного из них зависит от конкретной задачи. Например, можно оставить "Время" как более количественный показатель доступности.

4. **Сильная корреляция между "Общая площадь" и "Цена" (0.72):** Это подтверждает, что общая площадь — один из ключевых факторов, влияющих на цену недвижимости.

